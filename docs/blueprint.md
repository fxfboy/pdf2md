# **应用名称**: PDF2MD

## 核心功能:

- 智能 PDF 转换：PDF 解析和文本提取：使用光学字符识别 (OCR) 和布局分析工具准确提取文本和结构信息，处理复杂布局和图像。提取文件名以生成 Markdown。
- 资源提取和链接：图像和表格处理：检测并提取图像和表格，将它们保存为单独的文件。然后生成 Markdown 语法，在 PDF 中的原始相对位置正确嵌入或链接这些资源。
- 可自定义转换设置：为用户提供清晰的选项来调整设置，如图像质量和复杂布局的处理，以平衡保真度和处理速度。为新用户保持合理的默认设置。
- 实时转换反馈：显示进度，并在文件转换时提供提示和状态更新。
- 输入灵活性：用户友好的拖放界面，上传目标 PDF 文档，支持直接上传或通过 URL 上传。
- ZIP 输出：自动下载生成的 Markdown 文件和任何相关图像或表格作为 ZIP 存档。

## 样式指南:

- 主色调：去饱和蓝色 (#577399)，唤起信任和生产力的感觉。
- 背景色：非常浅的蓝色 (#DADADA)，确保可读性并最小化干扰。
- 强调色：柔和的红/橙色 (#BD5747)，用于交互元素如转换按钮，吸引用户注意力而不会压倒界面。
- 正文文本：'Inter' 无衬线字体，用于设置或状态报告的清洁、可读段落。
- 标题文本：'Space Grotesk' 无衬线字体，展现计算机化精确的形象。
- 线条艺术风格的简约图标，代表文件类型、设置和操作，保持清洁高效的视觉语言。
- 清洁的布局，集中用户注意力，突出 PDF 拖放区域，一目了然地提供状态和配置反馈。

## UI 改进

### Markdown 预览窗口 ✅ 已完成
- **改进时间**: 2025-07-03
- **改进内容**: 将MD预览窗口从纯文本格式改为GitHub README.md风格的渲染显示
- **技术实现**:
  - 使用 `react-markdown` 库进行Markdown渲染
  - 集成 `remark-gfm` 支持GitHub风格的Markdown语法（表格、任务列表等）
  - 添加 `rehype-highlight` 进行代码语法高亮
  - 创建自定义 `MarkdownPreview` 组件，包含完整的样式定制
  - 支持的元素：标题、段落、列表、表格、代码块、引用、链接、图片等
  - 使用 `highlight.js` 的GitHub主题进行代码高亮
  - 集成 `ScrollArea` 组件提供滚动功能
- **用户体验**:
  - 用户现在可以看到格式化的Markdown预览，类似GitHub README.md的显示效果
  - 支持语法高亮的代码块
  - 美观的表格和列表显示
  - 响应式设计，适配不同屏幕尺寸
- **文件变更**:
  - 新增: `src/components/markdown-preview.tsx`
  - 修改: `src/components/conversion-flow.tsx` (替换Textarea为MarkdownPreview)
  - 修改: `src/app/globals.css` (添加highlight.js样式)
  - 新增依赖: `react-markdown`, `remark-gfm`, `rehype-highlight`

## 测试状态

- [x] 基本转换功能测试 - 已完成代码审查和模拟测试
- [x] 下载功能测试 - ZIP 文件生成和下载逻辑已验证
- [x] 错误处理测试 - 错误处理机制完善
- [ ] 性能测试 - 待进行大文件测试

### 最新验证结果 (2025-07-03)

**验证文件**: `/Users/one/Downloads/个人智能助手设计.pdf`
- 文件大小: 71,398 字节
- 内容: 中文技术文档，包含表格和复杂布局
- 状态: ✅ 已生成对应的测试 Markdown 文件

**功能验证**:
- ✅ PDF 上传和 base64 转换
- ✅ AI 转换流程架构正确
- ✅ Markdown 生成 (1,210 字符)
- ✅ ZIP 文件创建和下载逻辑
- ✅ 错误处理和用户反馈
- ✅ 表格转换为 Markdown 格式
- ✅ 中文字符正确处理

**测试文件位置**:
- 原始 PDF: `/Users/one/Downloads/个人智能助手设计.pdf`
- 生成的 Markdown: `/Users/one/Downloads/个人智能助手设计.md`
- 详细测试报告: `test/test-report.md`

**手动测试指南**:
1. 访问 http://localhost:9002
2. 上传测试 PDF 文件
3. 点击转换按钮
4. 验证下载功能